<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      padding: 20px;
      margin: 0;
    }
    h1, h3 {
      text-align: center;
      margin-bottom: 20px;
    }
    button {
      padding: 8px 12px;
      margin: 6px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #toggle-server-btn {
      display: block;
      margin: 10px auto 30px;
      font-weight: bold;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    th {
      background: #222;
    }
    tr:nth-child(even) {
      background-color: #1c1c1c;
    }
    .block-btn {
      background: #e74c3c;
      color: white;
    }
    .unblock-btn {
      background: #27ae60;
      color: white;
    }
    .premium-btn {
      background: gold;
      color: black;
    }
    .free-btn {
      background: #3498db;
      color: white;
    }
    #password-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #password-screen div {
      background: #111;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #444;
      text-align: center;
      width: 90%;
      max-width: 300px;
    }
    #password-screen input {
      width: 100%;
      padding: 10px;
      margin-top: 15px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
    }
    #password-screen button {
      margin-top: 15px;
      width: 100%;
      background: #007bff;
      color: white;
      font-size: 16px;
    }
    #admin-content {
      display: none;
    }
  </style>
</head>
<body>

<div id="password-screen">
  <div>
    <h2>üîí Admin Access</h2>
    <p>Enter admin password to continue</p>
    <input type="password" id="admin-pass" placeholder="Enter password" />
    <button onclick="checkPassword()">Unlock</button>
    <p id="pass-error" style="color:red; margin-top:10px;"></p>
  </div>
</div>

<div id="admin-content">
  <h1>üëë Admin Panel</h1>
  <h3>üåê Server Status: <span id="server-status-text">Checking...</span></h3>
  <button id="toggle-server-btn">Toggle Server</button>

  <table>
    <thead>
      <tr>
        <th>Username</th>
        <th>Status</th>
        <th>Blocked</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="user-table"></tbody>
  </table>
</div>

<script>
  const PASS = "siyam944";

  function checkPassword() {
    const input = document.getElementById("admin-pass").value;
    const error = document.getElementById("pass-error");
    if (input === PASS) {
      sessionStorage.setItem("admin_access", "true");
      document.getElementById("password-screen").style.display = "none";
      document.getElementById("admin-content").style.display = "block";
      loadAdminPanel();
    } else {
      error.textContent = "‚ùå Incorrect password!";
    }
  }

  if (sessionStorage.getItem("admin_access") === "true") {
    document.getElementById("password-screen").style.display = "none";
    document.getElementById("admin-content").style.display = "block";
    loadAdminPanel();
  }

  function loadAdminPanel() {
    const userTable = document.getElementById('user-table');
    const toggleBtn = document.getElementById('toggle-server-btn');
    const statusText = document.getElementById('server-status-text');

    function updateServerUI() {
      const isOn = localStorage.getItem('server_status') !== 'off';
      statusText.innerText = isOn ? 'üü¢ Online' : 'üî¥ Offline';
      toggleBtn.textContent = isOn ? 'üî¥ Turn OFF Server' : 'üü¢ Turn ON Server';
    }

    toggleBtn.onclick = () => {
      const current = localStorage.getItem('server_status');
      const nextStatus = current === 'off' ? 'on' : 'off';
      localStorage.setItem('server_status', nextStatus);
      updateServerUI();
    };

    function loadUsers() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      userTable.innerHTML = '';

      users.forEach((user, index) => {
        const status = user.type === 'premium' ? 'üåü Premium' : 'Free';
        const blocked = user.blocked ? 'üö´ Yes' : '‚úÖ No';

        const row = `
          <tr>
            <td>${user.username}</td>
            <td>${status}</td>
            <td>${blocked}</td>
            <td>
              <button class="${user.blocked ? 'unblock-btn' : 'block-btn'}" onclick="toggleBlock(${index})">
                ${user.blocked ? 'Unblock' : 'Block'}
              </button>
              <button class="premium-btn" onclick="makePremium(${index})">Give Premium</button>
              <button class="free-btn" onclick="makeFree(${index})">Give Free</button>
            </td>
          </tr>
        `;
        userTable.insertAdjacentHTML('beforeend', row);
      });
    }

    window.toggleBlock = function(index) {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      users[index].blocked = !users[index].blocked;
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      loadUsers();
    }

    window.makePremium = function(index) {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      users[index].type = 'premium';
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      loadUsers();
    }

    window.makeFree = function(index) {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      users[index].type = 'free';
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      loadUsers();
    }

    updateServerUI();
    loadUsers();
  }
</script>

</body>
</html>
